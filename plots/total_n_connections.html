<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Total Number of Connections</title>
</head>
<body>
<div id="plot"></div>

<script src="https://cdn.plot.ly/plotly-2.6.3.min.js"></script>

<script>
    layout = {
        title: 'Total Number of Connections',
        xaxis: {
            tickmode: "array", // If "array", the placement of the ticks is set via `tickvals` and the tick text is `ticktext`.
            tickvals: [0,3600,7200,10800,14400,18000,21600,25200, 28800, 32400, 36000, 39600, 43200],
            ticktext: ['8 am', '9 am', '10 am', '11 am', '12 Lunch', '1 pm', '2 pm','3 pm','4 pm','5 pm','6 pm', '7 pm','8 pm Exit']
        }
    }

    config = {
        responsive: true
    }

    PLOT = document.getElementById('plot');
    Plotly.newPlot(PLOT, [{x: [], y: []}], layout, config )

    // load file
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", "../reports/sum.txt", false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                var allText = rawFile.responseText;
                var lines = allText.split('\n');
                for(var line = 0; line < lines.length; line++){
                    let numbers = lines[line].split(' ')
                    let t_data = numbers[0]
                    let n_data = numbers[1]

                    Plotly.extendTraces(PLOT, {x: [[t_data]], y: [[n_data]]}, [0])
                }
            }
        }
    }
    rawFile.send(null);
</script>
</body>
</html>